{"ast":null,"code":"var _jsxFileName = \"C:\\\\react\\\\my-app\\\\src\\\\MapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport '@arcgis/core/assets/esri/themes/light/main.css';\nimport { loadModules } from 'esri-loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = () => {\n  _s();\n  const mapRef = useRef(null);\n  const [popupData, setPopupData] = useState(null);\n  const [popupPosition, setPopupPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  useEffect(() => {\n    let view;\n    loadModules(['esri/Map', 'esri/views/MapView', 'esri/layers/FeatureLayer']).then(([Map, MapView, FeatureLayer]) => {\n      const map = new Map({\n        basemap: 'streets'\n      });\n      view = new MapView({\n        container: mapRef.current,\n        map: map,\n        center: [34.8516, 31.0461],\n        // 砖专\n        zoom: 7\n      });\n      const featureLayer = new FeatureLayer({\n        url: 'https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Cities/FeatureServer/0',\n        outFields: ['CITY_NAME', 'POP'],\n        popupEnabled: false,\n        definitionExpression: \"CAPITAL = 'Primary'\"\n      });\n      map.add(featureLayer);\n      view.on(\"click\", async event => {\n        const response = await view.hitTest(event);\n        const result = response.results.find(res => res.graphic && res.graphic.layer === featureLayer);\n        if (result) {\n          const attributes = result.graphic.attributes;\n          setPopupData({\n            city: attributes.CITY_NAME,\n            population: attributes.POP\n          });\n          setPopupPosition({\n            x: event.x,\n            y: event.y\n          });\n        } else {\n          setPopupData(null);\n        }\n      });\n    }).catch(err => console.error(err));\n    return () => {\n      var _view;\n      return (_view = view) === null || _view === void 0 ? void 0 : _view.destroy();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '100vh',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        width: '100%',\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), popupData && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        left: popupPosition.x + 10,\n        top: popupPosition.y + 10,\n        background: '#ffffff',\n        padding: '10px',\n        borderRadius: '8px',\n        boxShadow: '0px 4px 8px rgba(0, 0, 0, 0.2)',\n        zIndex: 1000\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: 0,\n          fontSize: '16px',\n          color: '#333'\n        },\n        children: [\"\\uD83C\\uDF0D \", popupData.city]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: '5px 0',\n          fontSize: '14px',\n          color: '#555'\n        },\n        children: [\"\\uD83D\\uDC65 Population: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: popupData.population.toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setPopupData(null),\n        style: {\n          background: '#d9534f',\n          color: 'white',\n          border: 'none',\n          padding: '5px 10px',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        },\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"8znNHMGuyGskvJJo8waNqeDfc8Y=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","loadModules","jsxDEV","_jsxDEV","MapComponent","_s","mapRef","popupData","setPopupData","popupPosition","setPopupPosition","x","y","view","then","Map","MapView","FeatureLayer","map","basemap","container","current","center","zoom","featureLayer","url","outFields","popupEnabled","definitionExpression","add","on","event","response","hitTest","result","results","find","res","graphic","layer","attributes","city","CITY_NAME","population","POP","catch","err","console","error","_view","destroy","style","width","height","position","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","left","top","background","padding","borderRadius","boxShadow","zIndex","margin","fontSize","color","toLocaleString","onClick","border","cursor","_c","$RefreshReg$"],"sources":["C:/react/my-app/src/MapComponent.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport '@arcgis/core/assets/esri/themes/light/main.css';\r\nimport { loadModules } from 'esri-loader';\r\n\r\nconst MapComponent = () => {\r\n  const mapRef = useRef(null);\r\n  const [popupData, setPopupData] = useState(null);\r\n  const [popupPosition, setPopupPosition] = useState({ x: 0, y: 0 });\r\n\r\n  useEffect(() => {\r\n    let view;\r\n\r\n    loadModules(['esri/Map', 'esri/views/MapView', 'esri/layers/FeatureLayer'])\r\n      .then(([Map, MapView, FeatureLayer]) => {\r\n        const map = new Map({\r\n          basemap: 'streets'\r\n        });\r\n\r\n        view = new MapView({\r\n          container: mapRef.current,\r\n          map: map,\r\n          center: [34.8516, 31.0461], // 砖专\r\n          zoom: 7\r\n        });\r\n\r\n        const featureLayer = new FeatureLayer({\r\n          url: 'https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Cities/FeatureServer/0',\r\n          outFields: ['CITY_NAME', 'POP'],\r\n          popupEnabled: false,\r\n          definitionExpression: \"CAPITAL = 'Primary'\"\r\n        });\r\n\r\n        map.add(featureLayer);\r\n\r\n        \r\n        view.on(\"click\", async (event) => {\r\n          const response = await view.hitTest(event);\r\n          const result = response.results.find(res => res.graphic && res.graphic.layer === featureLayer);\r\n\r\n          if (result) {\r\n            const attributes = result.graphic.attributes;\r\n            setPopupData({\r\n              city: attributes.CITY_NAME,\r\n              population: attributes.POP\r\n            });\r\n\r\n            setPopupPosition({ x: event.x, y: event.y });\r\n          } else {\r\n            setPopupData(null);\r\n          }\r\n        });\r\n      })\r\n      .catch((err) => console.error(err));\r\n\r\n    return () => view?.destroy();\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100vh', position: 'relative' }}>\r\n      <div ref={mapRef} style={{ width: '100%', height: '100%' }}></div>\r\n\r\n      {/* 驻驻-驻 转 砖转 */}\r\n      {popupData && (\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            left: popupPosition.x + 10,\r\n            top: popupPosition.y + 10,\r\n            background: '#ffffff',\r\n            padding: '10px',\r\n            borderRadius: '8px',\r\n            boxShadow: '0px 4px 8px rgba(0, 0, 0, 0.2)',\r\n            zIndex: 1000\r\n          }}\r\n        >\r\n          <h3 style={{ margin: 0, fontSize: '16px', color: '#333' }}>\r\n             {popupData.city}\r\n          </h3>\r\n          <p style={{ margin: '5px 0', fontSize: '14px', color: '#555' }}>\r\n             Population: <strong>{popupData.population.toLocaleString()}</strong>\r\n          </p>\r\n          <button onClick={() => setPopupData(null)} style={{\r\n            background: '#d9534f', color: 'white', border: 'none', padding: '5px 10px', borderRadius: '4px',\r\n            cursor: 'pointer'\r\n          }}>\r\n            Close\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapComponent;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAO,gDAAgD;AACvD,SAASC,WAAW,QAAQ,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1C,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAMC,MAAM,GAAGP,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACS,aAAa,EAAEC,gBAAgB,CAAC,GAAGV,QAAQ,CAAC;IAAEW,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAElEd,SAAS,CAAC,MAAM;IACd,IAAIe,IAAI;IAERZ,WAAW,CAAC,CAAC,UAAU,EAAE,oBAAoB,EAAE,0BAA0B,CAAC,CAAC,CACxEa,IAAI,CAAC,CAAC,CAACC,GAAG,EAAEC,OAAO,EAAEC,YAAY,CAAC,KAAK;MACtC,MAAMC,GAAG,GAAG,IAAIH,GAAG,CAAC;QAClBI,OAAO,EAAE;MACX,CAAC,CAAC;MAEFN,IAAI,GAAG,IAAIG,OAAO,CAAC;QACjBI,SAAS,EAAEd,MAAM,CAACe,OAAO;QACzBH,GAAG,EAAEA,GAAG;QACRI,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC;QAAE;QAC5BC,IAAI,EAAE;MACR,CAAC,CAAC;MAEF,MAAMC,YAAY,GAAG,IAAIP,YAAY,CAAC;QACpCQ,GAAG,EAAE,gGAAgG;QACrGC,SAAS,EAAE,CAAC,WAAW,EAAE,KAAK,CAAC;QAC/BC,YAAY,EAAE,KAAK;QACnBC,oBAAoB,EAAE;MACxB,CAAC,CAAC;MAEFV,GAAG,CAACW,GAAG,CAACL,YAAY,CAAC;MAGrBX,IAAI,CAACiB,EAAE,CAAC,OAAO,EAAE,MAAOC,KAAK,IAAK;QAChC,MAAMC,QAAQ,GAAG,MAAMnB,IAAI,CAACoB,OAAO,CAACF,KAAK,CAAC;QAC1C,MAAMG,MAAM,GAAGF,QAAQ,CAACG,OAAO,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,OAAO,IAAID,GAAG,CAACC,OAAO,CAACC,KAAK,KAAKf,YAAY,CAAC;QAE9F,IAAIU,MAAM,EAAE;UACV,MAAMM,UAAU,GAAGN,MAAM,CAACI,OAAO,CAACE,UAAU;UAC5ChC,YAAY,CAAC;YACXiC,IAAI,EAAED,UAAU,CAACE,SAAS;YAC1BC,UAAU,EAAEH,UAAU,CAACI;UACzB,CAAC,CAAC;UAEFlC,gBAAgB,CAAC;YAAEC,CAAC,EAAEoB,KAAK,CAACpB,CAAC;YAAEC,CAAC,EAAEmB,KAAK,CAACnB;UAAE,CAAC,CAAC;QAC9C,CAAC,MAAM;UACLJ,YAAY,CAAC,IAAI,CAAC;QACpB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,CACDqC,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC;IAErC,OAAO;MAAA,IAAAG,KAAA;MAAA,QAAAA,KAAA,GAAMpC,IAAI,cAAAoC,KAAA,uBAAJA,KAAA,CAAMC,OAAO,CAAC,CAAC;IAAA;EAC9B,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE/C,OAAA;IAAKgD,KAAK,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEC,MAAM,EAAE,OAAO;MAAEC,QAAQ,EAAE;IAAW,CAAE;IAAAC,QAAA,gBACnEpD,OAAA;MAAKqD,GAAG,EAAElD,MAAO;MAAC6C,KAAK,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAO;IAAE;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAGjErD,SAAS,iBACRJ,OAAA;MACEgD,KAAK,EAAE;QACLG,QAAQ,EAAE,UAAU;QACpBO,IAAI,EAAEpD,aAAa,CAACE,CAAC,GAAG,EAAE;QAC1BmD,GAAG,EAAErD,aAAa,CAACG,CAAC,GAAG,EAAE;QACzBmD,UAAU,EAAE,SAAS;QACrBC,OAAO,EAAE,MAAM;QACfC,YAAY,EAAE,KAAK;QACnBC,SAAS,EAAE,gCAAgC;QAC3CC,MAAM,EAAE;MACV,CAAE;MAAAZ,QAAA,gBAEFpD,OAAA;QAAIgD,KAAK,EAAE;UAAEiB,MAAM,EAAE,CAAC;UAAEC,QAAQ,EAAE,MAAM;UAAEC,KAAK,EAAE;QAAO,CAAE;QAAAf,QAAA,GAAC,eACtD,EAAChD,SAAS,CAACkC,IAAI;MAAA;QAAAgB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB,CAAC,eACLzD,OAAA;QAAGgD,KAAK,EAAE;UAAEiB,MAAM,EAAE,OAAO;UAAEC,QAAQ,EAAE,MAAM;UAAEC,KAAK,EAAE;QAAO,CAAE;QAAAf,QAAA,GAAC,2BAC/C,eAAApD,OAAA;UAAAoD,QAAA,EAAShD,SAAS,CAACoC,UAAU,CAAC4B,cAAc,CAAC;QAAC;UAAAd,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtE,CAAC,eACJzD,OAAA;QAAQqE,OAAO,EAAEA,CAAA,KAAMhE,YAAY,CAAC,IAAI,CAAE;QAAC2C,KAAK,EAAE;UAChDY,UAAU,EAAE,SAAS;UAAEO,KAAK,EAAE,OAAO;UAAEG,MAAM,EAAE,MAAM;UAAET,OAAO,EAAE,UAAU;UAAEC,YAAY,EAAE,KAAK;UAC/FS,MAAM,EAAE;QACV,CAAE;QAAAnB,QAAA,EAAC;MAEH;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACvD,EAAA,CAvFID,YAAY;AAAAuE,EAAA,GAAZvE,YAAY;AAyFlB,eAAeA,YAAY;AAAC,IAAAuE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}